<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Stats Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <span class="logo-icon">üìä</span>
                <h1>Trading Stats Tracker</h1>
            </div>
            <p class="tagline">Analyze your MT4/MT5 trading performance</p>
        </header>

        <!-- Upload Section -->
        <section class="upload-section" id="uploadSection">
            <div class="upload-box" id="uploadBox">
                <div class="upload-icon">üìÅ</div>
                <h2>Upload Trade History</h2>
                <p>Drag & drop your MT4/MT5 trade history file here</p>
                <p class="file-types">Supports: CSV, HTML exports from MetaTrader</p>
                <input type="file" id="fileInput" accept=".csv,.htm,.html" hidden>
                <button class="upload-btn" onclick="document.getElementById('fileInput').click()">
                    Choose File
                </button>
            </div>
            <div class="sample-data">
                <button class="sample-btn" onclick="loadSampleData()">
                    üìà Load Sample Data
                </button>
            </div>
        </section>

        <!-- Dashboard Section (Hidden initially) -->
        <section class="dashboard" id="dashboard" style="display: none;">
            <!-- Summary Cards -->
            <div class="stats-grid">
                <div class="stat-card balance">
                    <div class="stat-icon">üè¶</div>
                    <div class="stat-content">
                        <h3>Initial Balance</h3>
                        <p class="stat-value" id="initialBalance">$0.00</p>
                    </div>
                </div>
                <div class="stat-card profit">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-content">
                        <h3>Total Profit/Loss</h3>
                        <p class="stat-value" id="totalPnL">$0.00</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üéØ</div>
                    <div class="stat-content">
                        <h3>Win Rate</h3>
                        <p class="stat-value" id="winRate">0%</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-content">
                        <h3>Total Trades</h3>
                        <p class="stat-value" id="totalTrades">0</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚öñÔ∏è</div>
                    <div class="stat-content">
                        <h3>Profit Factor</h3>
                        <p class="stat-value" id="profitFactor">0.00</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìâ</div>
                    <div class="stat-content">
                        <h3>Max Drawdown</h3>
                        <p class="stat-value" id="maxDrawdown">$0.00</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-content">
                        <h3>Max DD %</h3>
                        <p class="stat-value" id="maxDrawdownPercent">0.00%</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-content">
                        <h3>Avg Trade</h3>
                        <p class="stat-value" id="avgTrade">$0.00</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üíπ</div>
                    <div class="stat-content">
                        <h3>Return %</h3>
                        <p class="stat-value" id="returnPercent">0.00%</p>
                    </div>
                </div>
                <div class="stat-card pips">
                    <div class="stat-icon">üìç</div>
                    <div class="stat-content">
                        <h3>Total Pips</h3>
                        <p class="stat-value" id="totalPips">0.0</p>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-container">
                <div class="chart-box">
                    <h3>Equity Curve</h3>
                    <canvas id="equityChart"></canvas>
                </div>
                <div class="chart-box">
                    <h3>üìà Cumulative Pips</h3>
                    <canvas id="pipsChart"></canvas>
                </div>
                <div class="chart-box">
                    <h3>Profit/Loss Distribution</h3>
                    <canvas id="pnlDistribution"></canvas>
                </div>
                <div class="chart-box">
                    <h3>Win/Loss by Day of Week</h3>
                    <canvas id="dayOfWeekChart"></canvas>
                </div>
                <div class="chart-box">
                    <h3>Trade Performance by Symbol</h3>
                    <canvas id="symbolChart"></canvas>
                </div>
            </div>

            <!-- Calendar Section -->
            <div class="calendar-section">
                <div class="calendar-header">
                    <h3>üìÖ Trading Calendar</h3>
                    <div class="calendar-nav">
                        <button class="calendar-nav-btn" id="prevMonth">‚Üê</button>
                        <span class="calendar-month-year" id="calendarMonthYear">January 2024</span>
                        <button class="calendar-nav-btn" id="nextMonth">‚Üí</button>
                    </div>
                </div>
                <div class="calendar-container">
                    <div class="calendar-weekdays">
                        <div class="weekday">Sun</div>
                        <div class="weekday">Mon</div>
                        <div class="weekday">Tue</div>
                        <div class="weekday">Wed</div>
                        <div class="weekday">Thu</div>
                        <div class="weekday">Fri</div>
                        <div class="weekday">Sat</div>
                    </div>
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- Calendar days will be generated by JavaScript -->
                    </div>
                </div>
                <div class="calendar-legend">
                    <div class="legend-item">
                        <span class="legend-color profit"></span>
                        <span>Profit Day</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color loss"></span>
                        <span>Loss Day</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color no-trade"></span>
                        <span>No Trades</span>
                    </div>
                </div>
            </div>

            <!-- Additional Stats -->
            <div class="additional-stats">
                <div class="stats-table-container">
                    <h3>Detailed Statistics</h3>
                    <table class="stats-table">
                        <tbody>
                            <tr>
                                <td>Best Trade</td>
                                <td id="bestTrade">$0.00</td>
                            </tr>
                            <tr>
                                <td>Worst Trade</td>
                                <td id="worstTrade">$0.00</td>
                            </tr>
                            <tr>
                                <td>Average Win</td>
                                <td id="avgWin">$0.00</td>
                            </tr>
                            <tr>
                                <td>Average Loss</td>
                                <td id="avgLoss">$0.00</td>
                            </tr>
                            <tr>
                                <td>Largest Winning Streak</td>
                                <td id="winStreak">0</td>
                            </tr>
                            <tr>
                                <td>Largest Losing Streak</td>
                                <td id="loseStreak">0</td>
                            </tr>
                            <tr>
                                <td>Average Holding Time</td>
                                <td id="avgHoldTime">0h 0m</td>
                            </tr>
                            <tr>
                                <td>Risk/Reward Ratio</td>
                                <td id="riskReward">0.00</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="stats-table-container">
                    <h3>Performance by Hour</h3>
                    <canvas id="hourChart"></canvas>
                </div>
            </div>

            <!-- Trade History Table -->
            <div class="trade-history">
                <h3>Trade History</h3>
                <div class="table-wrapper">
                    <table class="history-table" id="tradeTable">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Symbol</th>
                                <th>Type</th>
                                <th>Volume</th>
                                <th>Open Price</th>
                                <th>Close Price</th>
                                <th>Duration</th>
                                <th>Pips</th>
                                <th>Profit/Loss</th>
                            </tr>
                        </thead>
                        <tbody id="tradeTableBody">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Reset Button -->
            <div class="reset-section">
                <button class="reset-btn" onclick="resetDashboard()">
                    üîÑ Upload New Data
                </button>
            </div>
        </section>
    </div>

    <script src="parser.js"></script>
    <script src="stats.js"></script>
    <script src="charts.js"></script>
    <script src="calendar.js"></script>
    <script src="app.js"></script>
</body>
</html>